{% extends 'base/base.html' %}

{% block contenido %}
    <div class="wrapper">
        <div class="content-page">
            <div class="container-fluid">
                <div class="col-sm-12 col-lg-12">
                    <h4 class="card-title">Listado de producciones</h4>

                </div>
                <div class="col-sm-12 col-lg-12">
                    <table id="datatable" class="table data-table table-striped">
                        <thead>
                        <tr>
                            <th>Lote</th>
                            <th>Nombre del Producto</th>
                            <th>Cantidad Estimada</th>
                            <th>Costo</th>
                            <th>Planta</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for produccion in produccions %}
                            <tr>
                                <td>{{ produccion.lote }}</td>
                                <td>{{ produccion.nombre_producto }}</td>
                                <td>{{ produccion.cantidad_estimada }}</td>
                                <td>{{ produccion.costo }}</td>
                                <td>{{ produccion.planta }}</td>
                                <td>{{ produccion.estado }}</td>
                                <td>
                                    <div class="button-container" style="display: flex; gap: 10px;">
                                        <!--Iniciar producción--> <!--acción de cambio de estado directofas fa-play (En procesourl 'produccion_update' produccion.pk )-->
                                        {% if produccion.estado == 'pendiente' %}
                                            <a href="{% url 'iniciar_produccion' produccion.id %}"
                                                title="Iniciar producción" class="btn bi bi-play-btn" fill="currentColor">
                                                
                                            </a>
                                        {% endif %}
                                        <!--Terminada producción--> <!--fas fa-checkformulario confirmando la cantidad del producto-->
                                        {% if produccion.estado == 'En proceso' %}    
                                            <a href="{% url 'concluir_produccion' produccion.id %}"
                                                title="Cierre de producción" class="btn bi bi-check2-square"></a>
                                        {% endif %}
                                        <!--Registrar pruebas químicas--> <!--formulario para subir doc de PQ y se cambia 
                                        el estado a disponible para la venta o indicar ajuste de inventario-->
                                        <a href="#"
                                           title="Registrar pruebas químicas" class="btn far fa-edit"></a>
                                        <!--Cancelar producción--> <!--formulario para indicar la causa ¿Pregunta que
                                         hago con la materia prima o el semiproducto?-->
                                        <a href="#"
                                           title="Cancelar producción"
                                           class="btn far fa-trash-alt" style="color: #ed1010;"></a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                        <tfoot>
                        <tr>
                            <th>Lote</th>
                            <th>Nombre del Producto</th>
                            <th>Cantidad Estimada</th>
                            <th>Costo</th>
                            <th>Planta</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                        </tfoot>
                    </table>
                    <a href="{% url 'crear_produccion' %}" class="btn btn-success">Crear producción</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}